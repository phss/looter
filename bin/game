#!/usr/bin/env ruby

require_relative '../lib/looter'
require 'YAML'

adventure_file_path = ARGV.first
adventure_raw = YAML.load_file(adventure_file_path)

adventure = AdventureLoader.load_from_hash(adventure_raw)

ui = UI.new($stdin, $stdout)

game = Game.new(ui, 
  AdventureSaver.new('saves/save_adventure_cave.yaml'), #TODO make it parametrisable 
  {
    :intro => IntroScreen,
    :room => RoomScreen,
    :exit => ExitScreen
  }, :intro)
game.play(adventure)
